<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ClipAIble</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <header class="header">
      <div class="header-controls">
        <div class="header-control header-control-left">
          <select id="uiLanguageSelect" class="header-select" data-i18n-title="extensionLanguage" title="Extension Language">
            <option value="en">EN</option>
            <option value="ru">RU</option>
            <option value="ua">UA</option>
            <option value="de">DE</option>
            <option value="fr">FR</option>
            <option value="es">ES</option>
            <option value="it">IT</option>
            <option value="pt">PT</option>
            <option value="zh">ZH</option>
            <option value="ja">JA</option>
            <option value="ko">KO</option>
          </select>
        </div>
        <div class="header-title">
          <h1>ClipAIble</h1>
        </div>
        <div class="header-control header-control-right">
          <select id="themeSelect" class="header-select" data-i18n-title="theme" title="Theme">
            <option value="auto" data-i18n="auto">Auto</option>
            <option value="dark" data-i18n="darkTheme">Dark</option>
            <option value="light" data-i18n="lightTheme">Light</option>
          </select>
        </div>
      </div>
    </header>

    <main class="main">
      <!-- API Keys Section -->
      <section class="section api-section" id="apiSection">
        <div class="api-key-group">
          <label for="apiProviderSelect" data-i18n="aiProvider">AI Provider</label>
          <select id="apiProviderSelect">
            <option value="openai" data-i18n="openai">OpenAI</option>
            <option value="claude" data-i18n="claude">Claude</option>
            <option value="gemini" data-i18n="gemini">Gemini</option>
            <option value="grok" data-i18n="grok">Grok</option>
            <option value="openrouter" data-i18n="openrouter">OpenRouter</option>
          </select>
        </div>
        <div class="api-key-group">
          <label for="modelSelect" data-i18n="model">AI Model</label>
          <div class="model-select-wrapper">
            <select id="modelSelect">
              <option value="gpt-5.2">gpt-5.2</option>
              <option value="gpt-5.2-high">gpt-5.2-high</option>
              <option value="gpt-5.1">gpt-5.1</option>
              <option value="gpt-5.1-high">gpt-5.1-high</option>
              <option value="claude-sonnet-4-5">claude-sonnet-4-5</option>
              <option value="gemini-3-pro-preview">gemini-3-pro-preview</option>
              <option value="grok-4-1-fast-reasoning">grok-4-1-fast-reasoning</option>
            </select>
            <button id="addModelBtn" class="btn-icon" data-i18n-title="addModel" title="Add Model">
              <span class="plus-icon">+</span>
            </button>
          </div>
          <div id="customModelDropdown" class="custom-model-dropdown" style="display: none;">
            <div class="custom-model-options" id="customModelOptions"></div>
          </div>
        </div>
        <div class="api-key-group" id="apiKeyInputGroup">
          <label for="apiKey" id="apiKeyLabel" data-i18n="openaiApiKey">OpenAI API Key</label>
          <div class="input-group">
            <input 
              type="password" 
              id="apiKey" 
              data-i18n-placeholder="enterOpenAiApiKey"
              placeholder="sk-..."
              autocomplete="off"
            >
            <button id="toggleApiKey" class="btn-icon" data-i18n-title="showHide" title="Show/Hide">
              <span class="eye-icon">üëÅ</span>
            </button>
          </div>
        </div>
        <div class="api-key-group" id="googleApiGroup" style="display: none;">
          <label for="googleApiKey"><span data-i18n="googleApiKey">Google AI API Key</span> <span class="optional-badge" data-i18n="optionalBadge">for image translation</span></label>
          <div class="input-group">
            <input 
              type="password" 
              id="googleApiKey" 
              data-i18n-placeholder="enterGoogleApiKey"
              placeholder="AIza..."
              autocomplete="off"
            >
            <button id="toggleGoogleApiKey" class="btn-icon" data-i18n-title="showHide" title="Show/Hide">
              <span class="eye-icon">üëÅ</span>
            </button>
          </div>
        </div>
        <button id="saveApiKey" class="btn btn-secondary" data-i18n="saveKeys">Save Keys</button>
      </section>

      <!-- Status Section -->
      <section class="section status-section" id="statusSection">
        <div class="status-indicator" id="statusIndicator">
          <span class="status-dot"></span>
          <span class="status-text" id="statusText" data-i18n="ready">Ready</span>
        </div>
        <div class="progress-container" id="progressContainer" style="display: none;">
          <div class="progress-bar" id="progressBar"></div>
          <span class="progress-text" id="progressText">0%</span>
        </div>
      </section>

      <!-- Action Button -->
      <section class="section action-section">
        <div class="save-action-group">
          <button id="savePdfBtn" class="btn btn-primary">
            <span class="btn-icon-left" id="saveIcon">üìÑ</span>
            <span id="saveText" data-i18n="save">Save</span>
          </button>
          <button id="cancelBtn" class="btn btn-danger" style="display: none;">
            <span class="btn-icon-left">‚úï</span>
            <span data-i18n="cancel">Cancel</span>
          </button>
          <select id="mainFormatSelect" class="format-select">
            <option value="pdf">PDF</option>
            <option value="epub">EPUB</option>
            <option value="fb2">FB2</option>
            <option value="markdown">MD</option>
            <option value="audio">Audio</option>
          </select>
        </div>
      </section>

      <!-- Settings & Stats Toggle -->
      <section class="section settings-toggle">
        <button id="toggleSettings" class="btn btn-text">
          ‚öôÔ∏è <span data-i18n="settings">Settings</span>
        </button>
        <button id="toggleStats" class="btn btn-text">
          üìä <span data-i18n="statistics">Stats</span>
        </button>
      </section>

      <!-- Stats Panel (Hidden by default) -->
      <section class="section stats-panel" id="statsPanel">
        <div class="stats-content">
          <div class="stats-header">
          <h3 data-i18n="statistics">Statistics</h3>
        </div>
        <div class="stats-grid">
          <div class="stat-card stat-total">
            <div class="stat-value" id="statTotal">0</div>
            <div class="stat-label" data-i18n="totalSaved">Total saved</div>
          </div>
          <div class="stat-card stat-month">
            <div class="stat-value" id="statMonth">0</div>
            <div class="stat-label" data-i18n="thisMonth">This month</div>
          </div>
        </div>
        
        <div class="stats-section">
          <div class="stats-section-title" data-i18n="byFormat">By format</div>
          <div class="stats-formats" id="statsFormats">
            <div class="format-stat">
              <span class="format-icon">üìÑ</span>
              <span class="format-name">PDF</span>
              <span class="format-count" id="formatPdf">0</span>
            </div>
            <div class="format-stat">
              <span class="format-icon">üìö</span>
              <span class="format-name">EPUB</span>
              <span class="format-count" id="formatEpub">0</span>
            </div>
            <div class="format-stat">
              <span class="format-icon">üìñ</span>
              <span class="format-name">FB2</span>
              <span class="format-count" id="formatFb2">0</span>
            </div>
            <div class="format-stat">
              <span class="format-icon">üìù</span>
              <span class="format-name">MD</span>
              <span class="format-count" id="formatMarkdown">0</span>
            </div>
            <div class="format-stat">
              <span class="format-icon">üîä</span>
              <span class="format-name">Audio</span>
              <span class="format-count" id="formatAudio">0</span>
            </div>
          </div>
        </div>
        
        <div class="stats-section">
          <div class="stats-section-title" data-i18n="recentHistory">Recent history</div>
          <div class="stats-history" id="statsHistory">
            <div class="stats-empty" data-i18n="noDataYet">No data yet</div>
          </div>
        </div>
        
        <div class="stats-footer">
          <span class="stats-last-saved" id="statsLastSaved"></span>
          <span class="stats-avg-time" id="statsAvgTime"></span>
        </div>
        
        <button id="clearStatsBtn" class="btn btn-reset-small btn-full" data-i18n="clearStatistics">Clear Statistics</button>
        
        <div class="stats-section stats-section-cache">
          <div class="stats-section-title" data-i18n="selectorCache">Selector Cache</div>
          <div class="setting-item" style="margin-bottom: 12px;">
            <label class="checkbox-label">
              <input type="checkbox" id="enableCache">
              <span class="checkbox-text" data-i18n="enableSelectorCaching">Enable selector caching</span>
            </label>
            <p class="setting-hint" data-i18n="cacheSelectorsHint">Cache selectors for faster subsequent extractions</p>
          </div>
          <div class="cache-info">
            <span class="cache-stat">
              <span class="cache-value" id="cacheDomains">0</span> <span data-i18n="domainsCached">domains cached</span>
            </span>
          </div>
          <div class="cache-domains-list" id="cacheDomainsList">
            <div class="stats-empty" data-i18n="noCachedDomains">No cached domains</div>
          </div>
        </div>
        
        <button id="clearCacheBtn" class="btn btn-reset-small btn-full" data-i18n="clearCache">Clear Cache</button>
        </div>
      </section>

      <!-- Settings Panel (Hidden by default, uses CSS Grid animation) -->
      <section class="section settings-panel" id="settingsPanel">
        <div class="settings-content">
          <div class="setting-item">
          <label for="modeSelect" data-i18n="extractionMode">Extraction Mode</label>
          <select id="modeSelect">
            <option value="selector" data-i18n="aiSelectorFaster">AI Selector (faster, exact text)</option>
            <option value="extract" data-i18n="aiExtractFull">AI Extract (full processing)</option>
          </select>
          <p class="setting-hint" id="modeHint" data-i18n="extractionModeHint">AI finds article blocks, script extracts content</p>
        </div>
        <div class="setting-item" id="useCacheGroup">
          <label class="checkbox-label">
            <input type="checkbox" id="useCache">
            <span class="checkbox-text" data-i18n="useCachedSelectors">Use cached selectors</span>
          </label>
          <p class="setting-hint" data-i18n="useCachedSelectorsHint">Skip AI for sites you've saved before</p>
        </div>
        <!-- Output format select is now on main screen, but kept hidden for synchronization -->
        <select id="outputFormat" style="display: none;">
          <option value="pdf" data-i18n="saveAsPdf">PDF</option>
          <option value="epub" data-i18n="epubEreaders">EPUB (e-readers)</option>
          <option value="fb2" data-i18n="fb2Ereaders">FB2 (e-readers)</option>
          <option value="markdown" data-i18n="md">MD</option>
          <!-- Commented out: docx, html, txt formats removed from UI -->
          <!-- <option value="docx" data-i18n="saveAsDocx">DOCX (Word)</option> -->
          <!-- <option value="html" data-i18n="saveAsHtml">HTML</option> -->
          <!-- <option value="txt" data-i18n="saveAsTxt">TXT (Plain Text)</option> -->
          <option value="audio" data-i18n="audioMp3">Audio</option>
        </select>
        <!-- Audio Settings (Hidden by default) -->
        <div class="setting-item" id="audioProviderGroup" style="display: none;">
          <label for="audioProvider" data-i18n="ttsProvider">TTS Provider</label>
          <select id="audioProvider">
            <option value="openai" data-i18n="openaiTts">OpenAI TTS (MP3)</option>
            <option value="elevenlabs" data-i18n="elevenlabs">ElevenLabs (MP3)</option>
            <option value="google" data-i18n="googleTts">Google Gemini 2.5 TTS (WAV)</option>
            <option value="qwen" data-i18n="qwenTts">Qwen3-TTS-Flash (WAV)</option>
            <option value="respeecher" data-i18n="respeecher">Respeecher (EN/UA, WAV)</option>
          </select>
          <p class="setting-hint" data-i18n="ttsProviderHint">Choose text-to-speech provider</p>
        </div>
        <div class="setting-item" id="elevenlabsApiKeyGroup" style="display: none;">
          <label for="elevenlabsApiKey" data-i18n="elevenlabsApiKey">ElevenLabs API Key</label>
          <div class="input-group">
            <input 
              type="password" 
              id="elevenlabsApiKey" 
              data-i18n-placeholder="enterElevenlabsApiKey"
              placeholder="Enter ElevenLabs API key"
              autocomplete="off"
            >
            <button type="button" id="toggleElevenlabsApiKey" class="btn-icon" data-i18n-title="showHide" title="Show/Hide">
              <span class="eye-icon">üëÅ</span>
            </button>
            <button type="button" id="saveElevenlabsApiKey" class="btn btn-small" data-i18n="save">Save</button>
          </div>
          <p class="setting-hint"><span data-i18n="getElevenlabsKeyFrom">Get your API key from</span> <a href="https://elevenlabs.io/app/developers/api-keys" target="_blank">elevenlabs.io/app/developers/api-keys</a></p>
        </div>
        <div class="setting-item" id="qwenApiKeyGroup" style="display: none;">
          <label for="qwenApiKey" data-i18n="qwenApiKey">Qwen API Key</label>
          <div class="input-group">
            <input 
              type="password" 
              id="qwenApiKey" 
              data-i18n-placeholder="enterQwenApiKey"
              placeholder="Enter Qwen API key"
              autocomplete="off"
            >
            <button type="button" id="toggleQwenApiKey" class="btn-icon" data-i18n-title="showHide" title="Show/Hide">
              <span class="eye-icon">üëÅ</span>
            </button>
            <button type="button" id="saveQwenApiKey" class="btn btn-small" data-i18n="save">Save</button>
          </div>
          <p class="setting-hint"><span data-i18n="getQwenKeyFrom">Get your API key from</span> <a href="https://modelstudio.console.alibabacloud.com/?tab=dashboard#/api-key" target="_blank">modelstudio.console.alibabacloud.com</a></p>
        </div>
        <div class="setting-item" id="respeecherApiKeyGroup" style="display: none;">
          <label for="respeecherApiKey" data-i18n="respeecherApiKey">Respeecher API Key</label>
          <div class="input-group">
            <input 
              type="password" 
              id="respeecherApiKey" 
              data-i18n-placeholder="enterRespeecherApiKey"
              placeholder="Enter Respeecher API key"
              autocomplete="off"
            >
            <button type="button" id="toggleRespeecherApiKey" class="btn-icon" data-i18n-title="showHide" title="Show/Hide">
              <span class="eye-icon">üëÅ</span>
            </button>
            <button type="button" id="saveRespeecherApiKey" class="btn btn-small" data-i18n="save">Save</button>
          </div>
          <p class="setting-hint"><span data-i18n="getRespecherKeyFrom">Get your API key from</span> <a href="https://space.respeecher.com/api-keys" target="_blank">space.respeecher.com/api-keys</a></p>
        </div>
        <div class="setting-item" id="respeecherAdvancedGroup" style="display: none;">
          <details>
            <summary style="cursor: pointer; user-select: none;" data-i18n="advancedSamplingParams">Advanced Sampling Parameters</summary>
            <div style="margin-top: 10px;">
              <div class="setting-item">
                <label for="respeecherTemperature" data-i18n="temperature">Temperature</label>
                <div class="slider-container">
                  <input type="range" id="respeecherTemperature" min="0" max="2" step="0.1" value="1.0">
                  <span class="slider-value" id="respeecherTemperatureValue">1.0</span>
                </div>
                <p class="setting-hint" data-i18n="temperatureHint">Controls randomness/creativity (Low = deterministic, High = variable)</p>
              </div>
              <div class="setting-item">
                <label for="respeecherRepetitionPenalty" data-i18n="repetitionPenalty">Repetition Penalty</label>
                <div class="slider-container">
                  <input type="range" id="respeecherRepetitionPenalty" min="0" max="2" step="0.1" value="1.0">
                  <span class="slider-value" id="respeecherRepetitionPenaltyValue">1.0</span>
                </div>
                <p class="setting-hint" data-i18n="repetitionPenaltyHint">Reduces repetition in speech (Low = allowed, High = avoided)</p>
              </div>
              <div class="setting-item">
                <label for="respeecherTopP" data-i18n="topP">Top P (Nucleus Sampling)</label>
                <div class="slider-container">
                  <input type="range" id="respeecherTopP" min="0" max="1" step="0.01" value="1.0">
                  <span class="slider-value" id="respeecherTopPValue">1.0</span>
                </div>
                <p class="setting-hint" data-i18n="topPHint">Controls diversity of sampling</p>
              </div>
            </div>
          </details>
        </div>
        <div class="setting-item" id="googleTtsApiKeyGroup" style="display: none;">
          <label for="googleTtsApiKey" data-i18n="googleTtsApiKey">Google Gemini TTS API Key</label>
          <div class="input-group">
            <input 
              type="password" 
              id="googleTtsApiKey" 
              data-i18n-placeholder="enterGoogleTtsApiKey"
              placeholder="Enter Google TTS API key"
              autocomplete="off"
            >
            <button type="button" id="toggleGoogleTtsApiKey" class="btn-icon" data-i18n-title="showHide" title="Show/Hide">
              <span class="eye-icon">üëÅ</span>
            </button>
            <button type="button" id="saveGoogleTtsApiKey" class="btn btn-small" data-i18n="save">Save</button>
          </div>
          <p class="setting-hint"><span data-i18n="getGoogleTtsKeyFrom">Get your API key from</span> <a href="https://aistudio.google.com/app/apikey" target="_blank">aistudio.google.com/app/apikey</a> <span data-i18n="or">or</span> <a href="https://console.cloud.google.com/apis/credentials" target="_blank">Google Cloud Console</a></p>
        </div>
        <div class="setting-item" id="elevenlabsModelGroup" style="display: none;">
          <label for="elevenlabsModel" data-i18n="elevenlabsModel">ElevenLabs Model</label>
          <select id="elevenlabsModel">
            <option value="eleven_multilingual_v2" data-i18n="multilingualV2">Multilingual v2 (stable, natural)</option>
            <option value="eleven_v3" selected data-i18n="v3">v3 (most expressive)</option>
            <option value="eleven_turbo_v2_5" data-i18n="turboV25">Turbo v2.5 (fast)</option>
          </select>
        </div>
        <div class="setting-item" id="elevenlabsFormatGroup" style="display: none;">
          <label for="elevenlabsFormat" data-i18n="audioFormat">Audio Format</label>
          <select id="elevenlabsFormat">
            <option value="mp3_44100_192" selected>MP3 44.1kHz 192kbps (highest quality)</option>
            <option value="mp3_44100_128">MP3 44.1kHz 128kbps</option>
            <option value="mp3_22050_32">MP3 22.05kHz 32kbps</option>
            <option value="pcm_44100">PCM 44.1kHz</option>
            <option value="pcm_24000">PCM 24kHz</option>
            <option value="pcm_22050">PCM 22.05kHz</option>
            <option value="pcm_16000">PCM 16kHz</option>
            <option value="ulaw_8000">Œº-law 8kHz</option>
          </select>
        </div>
        <div class="setting-item" id="elevenlabsAdvancedGroup" style="display: none;">
          <details>
            <summary style="cursor: pointer; user-select: none;" data-i18n="advancedVoiceSettings">Advanced Voice Settings</summary>
            <div style="margin-top: 10px;">
              <div class="setting-item">
                <label for="elevenlabsStability" data-i18n="stability">Stability</label>
                <div class="slider-container">
                  <input type="range" id="elevenlabsStability" min="0" max="1" step="0.01" value="0.5">
                  <span class="slider-value" id="elevenlabsStabilityValue">0.5</span>
                </div>
                <p class="setting-hint" data-i18n="stabilityHint">Low = more variation, High = more stable</p>
              </div>
              <div class="setting-item">
                <label for="elevenlabsSimilarity" data-i18n="similarityBoost">Similarity Boost</label>
                <div class="slider-container">
                  <input type="range" id="elevenlabsSimilarity" min="0" max="1" step="0.01" value="0.75">
                  <span class="slider-value" id="elevenlabsSimilarityValue">0.75</span>
                </div>
                <p class="setting-hint" data-i18n="similarityHint">How closely the voice matches the original</p>
              </div>
              <div class="setting-item">
                <label for="elevenlabsStyle" data-i18n="style">Style</label>
                <div class="slider-container">
                  <input type="range" id="elevenlabsStyle" min="0" max="1" step="0.01" value="0.0">
                  <span class="slider-value" id="elevenlabsStyleValue">0.0</span>
                </div>
                <p class="setting-hint" data-i18n="styleHint">Low = neutral, High = expressive</p>
              </div>
              <div class="setting-item">
                <label class="checkbox-label">
                  <input type="checkbox" id="elevenlabsSpeakerBoost" checked>
                  <span class="checkbox-text" data-i18n="speakerBoost">Speaker Boost</span>
                </label>
                <p class="setting-hint" data-i18n="speakerBoostHint">Improves voice quality and clarity</p>
              </div>
            </div>
          </details>
        </div>
        <div class="setting-item" id="openaiInstructionsGroup" style="display: none;">
          <label for="openaiInstructions" data-i18n="voiceInstructions">Voice Instructions (Optional)</label>
          <textarea id="openaiInstructions" rows="2" placeholder="e.g., Read slowly and clearly, Read with enthusiasm" data-i18n-placeholder="voiceInstructionsPlaceholder"></textarea>
          <p class="setting-hint" data-i18n="voiceInstructionsHint">Additional instructions for voice style (OpenAI only)</p>
        </div>
        <div class="setting-item" id="googleTtsModelGroup" style="display: none;">
          <label for="googleTtsModel" data-i18n="model">Model</label>
          <select id="googleTtsModel">
            <option value="gemini-2.5-pro-preview-tts" selected data-i18n="geminiProTts">Gemini 2.5 Pro Preview TTS (higher quality)</option>
            <option value="gemini-2.5-flash-preview-tts" data-i18n="geminiFlashTts">Gemini 2.5 Flash Preview TTS (faster)</option>
            <option value="gemini-2.5-flash-lite-preview-tts" data-i18n="geminiFlashLiteTts">Gemini 2.5 Flash Lite TTS (Preview, single-speaker only)</option>
          </select>
        </div>
        <div class="setting-item" id="googleTtsVoiceGroup" style="display: none;">
          <label for="googleTtsVoice" data-i18n="voice">Voice</label>
          <select id="googleTtsVoice">
            <option value="Callirrhoe">Callirrhoe (Easy-going)</option>
            <option value="Zephyr">Zephyr (Bright)</option>
            <option value="Puck">Puck (Optimistic)</option>
            <option value="Charon">Charon (Informative)</option>
            <option value="Kore">Kore (Firm)</option>
            <option value="Fenrir">Fenrir (Excitable)</option>
            <option value="Leda">Leda (Youthful)</option>
            <option value="Orus">Orus (Firm)</option>
            <option value="Aoede">Aoede (Breezy)</option>
            <option value="Autonoe">Autonoe (Bright)</option>
            <option value="Enceladus">Enceladus (Breathy)</option>
            <option value="Iapetus">Iapetus (Clear)</option>
            <option value="Umbriel">Umbriel (Easy-going)</option>
            <option value="Algieba">Algieba (Smooth)</option>
            <option value="Despina">Despina (Smooth)</option>
            <option value="Erinome">Erinome (Clear)</option>
            <option value="Algenib">Algenib (Gravelly)</option>
            <option value="Rasalgethi">Rasalgethi (Informative)</option>
            <option value="Laomedeia">Laomedeia (Optimistic)</option>
            <option value="Achernar">Achernar (Soft)</option>
            <option value="Alnilam">Alnilam (Firm)</option>
            <option value="Schedar">Schedar (Even)</option>
            <option value="Gacrux">Gacrux (Mature)</option>
            <option value="Pulcherrima">Pulcherrima (Forward)</option>
            <option value="Achird">Achird (Friendly)</option>
            <option value="Zubenelgenubi">Zubenelgenubi (Casual)</option>
            <option value="Vindemiatrix">Vindemiatrix (Gentle)</option>
            <option value="Sadachbia">Sadachbia (Lively)</option>
            <option value="Sadaltager">Sadaltager (Knowledgeable)</option>
            <option value="Sulafat">Sulafat (Warm)</option>
          </select>
          <p class="setting-hint" data-i18n="googleTtsVoiceHint">Uses same API key as Gemini</p>
        </div>
        <div class="setting-item" id="googleTtsPromptGroup" style="display: none;">
          <label for="googleTtsPrompt" data-i18n="voiceStylePrompt">Voice Style Prompt (Optional)</label>
          <textarea id="googleTtsPrompt" rows="2" placeholder="e.g., Speak slowly and clearly, Read with enthusiasm" data-i18n-placeholder="voiceStylePromptPlaceholder"></textarea>
          <p class="setting-hint" data-i18n="googleTtsPromptHint">Control voice style and emotion. Leave empty for default natural speech.</p>
        </div>
        <div class="setting-item" id="audioVoiceGroup" style="display: none;">
          <label for="audioVoice" data-i18n="voice">Voice</label>
          <select id="audioVoice">
            <!-- OpenAI voices (default) -->
            <option value="nova">Nova (female, warm)</option>
            <option value="alloy">Alloy (neutral)</option>
            <option value="echo">Echo (male)</option>
            <option value="fable">Fable (expressive)</option>
            <option value="onyx">Onyx (male, deep)</option>
            <option value="shimmer">Shimmer (female, clear)</option>
            <option value="coral">Coral (female, friendly)</option>
            <option value="sage">Sage (neutral, calm)</option>
            <option value="ash">Ash (male, authoritative)</option>
            <option value="ballad">Ballad (expressive, dramatic)</option>
            <option value="verse">Verse (rhythmic)</option>
          </select>
        </div>
        <div class="setting-item" id="audioSpeedGroup" style="display: none;">
          <label for="audioSpeed" data-i18n="speed">Speech Speed</label>
          <div class="slider-container">
            <input type="range" id="audioSpeed" min="0.5" max="2" step="0.1" value="1">
            <span class="slider-value" id="audioSpeedValue">1.0x</span>
            <small id="audioSpeedNote" style="display:none; color: var(--text-muted);">Not applicable for this provider</small>
          </div>
        </div>
        <div class="setting-item">
          <label for="languageSelect" data-i18n="targetLanguage">Target Language</label>
          <select id="languageSelect">
            <option value="auto">Auto (original)</option>
            <option value="en">English</option>
            <option value="ru">–†—É—Å—Å–∫–∏–π</option>
            <option value="ua">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</option>
            <option value="de">Deutsch</option>
            <option value="fr">Fran√ßais</option>
            <option value="es">Espa√±ol</option>
            <option value="it">Italiano</option>
            <option value="pt">Portugu√™s</option>
            <option value="zh">‰∏≠Êñá</option>
            <option value="ja">Êó•Êú¨Ë™û</option>
            <option value="ko">ÌïúÍµ≠Ïñ¥</option>
          </select>
          <p class="setting-hint" id="languageHint" data-i18n="keepOriginalOrTranslate">Keep original or translate to selected language</p>
        </div>
        <div class="setting-item" id="translateImagesGroup" style="display: none;">
          <label class="checkbox-label">
            <input type="checkbox" id="translateImages">
            <span class="checkbox-text" data-i18n="translateImages">Translate images with text</span>
          </label>
          <p class="setting-hint" data-i18n="translateImagesHint">Uses Google Gemini AI to translate text on images</p>
        </div>
        <div class="setting-item">
          <label class="checkbox-label">
            <input type="checkbox" id="generateAbstract">
            <span class="checkbox-text" data-i18n="generateAbstract">Generate Abstract</span>
          </label>
            <p class="setting-hint" data-i18n="generateAbstractHint">AI-generated brief summary (2-3 paragraphs)</p>
        </div>
        <div class="setting-item">
          <label class="checkbox-label">
            <input type="checkbox" id="generateToc">
            <span class="checkbox-text" data-i18n="generateToc">Generate Table of Contents</span>
          </label>
          <p class="setting-hint" data-i18n="generateTocHint">Auto-create TOC from article headings</p>
        </div>
        <div class="setting-item" id="pageModeGroup">
          <label for="pageMode" data-i18n="pageLayout">Page Layout</label>
          <select id="pageMode">
            <option value="single" data-i18n="singleLongPage">Single long page</option>
            <option value="multi" data-i18n="multiplePagesA4">Multiple pages (A4)</option>
          </select>
        </div>
        <div class="settings-divider" id="pdfSettingsDivider"></div>
        <div class="setting-item">
          <label for="stylePreset" data-i18n="stylePreset">Style Preset</label>
          <select id="stylePreset">
            <option value="custom" data-i18n="custom">Custom</option>
            <option value="dark" data-i18n="dark">Dark (default)</option>
            <option value="light" data-i18n="light">Light</option>
            <option value="sepia" data-i18n="sepia">Sepia</option>
            <option value="contrast" data-i18n="highContrast">High Contrast</option>
          </select>
          <p class="setting-hint" data-i18n="quickStylePresets">Quick style presets for PDF</p>
        </div>
        <div class="setting-item">
          <label for="fontFamily" data-i18n="pdfFont">PDF Font</label>
          <div class="input-with-reset">
            <div class="custom-select" id="fontFamilyContainer">
              <div class="custom-select-trigger" id="fontFamilyTrigger">
                <span class="custom-select-value" id="fontFamilyValue" data-i18n="defaultSegoeUi">Default (Segoe UI)</span>
                <span class="custom-select-arrow">‚ñæ</span>
              </div>
              <div class="custom-select-options" id="fontFamilyOptions">
                <div class="custom-select-option selected" data-value="" style="font-family: 'Segoe UI', sans-serif" data-i18n="defaultSegoeUi">Default (Segoe UI)</div>
                <div class="custom-select-option" data-value="Arial" style="font-family: Arial, sans-serif">Arial</div>
                <div class="custom-select-option" data-value="Georgia" style="font-family: Georgia, serif">Georgia</div>
                <div class="custom-select-option" data-value="Times New Roman" style="font-family: 'Times New Roman', serif">Times New Roman</div>
                <div class="custom-select-option" data-value="Verdana" style="font-family: Verdana, sans-serif">Verdana</div>
                <div class="custom-select-option" data-value="Tahoma" style="font-family: Tahoma, sans-serif">Tahoma</div>
                <div class="custom-select-option" data-value="Trebuchet MS" style="font-family: 'Trebuchet MS', sans-serif">Trebuchet MS</div>
                <div class="custom-select-option" data-value="Palatino Linotype" style="font-family: 'Palatino Linotype', serif">Palatino Linotype</div>
                <div class="custom-select-option" data-value="Garamond" style="font-family: Garamond, serif">Garamond</div>
                <div class="custom-select-option" data-value="Courier New" style="font-family: 'Courier New', monospace">Courier New</div>
                <div class="custom-select-option" data-value="Comic Sans MS" style="font-family: 'Comic Sans MS', cursive">Comic Sans MS</div>
              </div>
            </div>
            <input type="hidden" id="fontFamily" value="">
            <button class="btn-reset-inline" data-reset="fontFamily" data-i18n-title="resetToDefaultTitle" title="Reset to default">‚Ü∫</button>
          </div>
        </div>
        <div class="setting-item">
          <label for="fontSize" data-i18n="pdfFontSize">PDF Font Size</label>
          <div class="input-with-reset">
            <input type="text" id="fontSize" placeholder="31" class="text-input text-input-short" value="31">
            <span class="input-suffix">px</span>
            <button class="btn-reset-inline" data-reset="fontSize" data-i18n-title="resetToDefaultTitle" title="Reset to default">‚Ü∫</button>
          </div>
        </div>
        <div class="setting-item">
          <label for="bgColor" data-i18n="pdfBackgroundColor">PDF Background Color</label>
          <div class="color-row">
            <input type="color" id="bgColor" value="#303030">
            <input type="text" id="bgColorText" value="#303030" maxlength="7" class="color-hex-input">
            <button class="btn-reset-inline" data-reset="bgColor" data-i18n-title="resetToDefaultTitle" title="Reset to default">‚Ü∫</button>
          </div>
        </div>
        <div class="setting-item">
          <label for="textColor" data-i18n="pdfTextColor">PDF Text Color</label>
          <div class="color-row">
            <input type="color" id="textColor" value="#b9b9b9">
            <input type="text" id="textColorText" value="#b9b9b9" maxlength="7" class="color-hex-input">
            <button class="btn-reset-inline" data-reset="textColor" data-i18n-title="resetToDefaultTitle" title="Reset to default">‚Ü∫</button>
          </div>
        </div>
        <div class="setting-item">
          <label for="headingColor" data-i18n="pdfHeadingColor">PDF Heading Color</label>
          <div class="color-row">
            <input type="color" id="headingColor" value="#cfcfcf">
            <input type="text" id="headingColorText" value="#cfcfcf" maxlength="7" class="color-hex-input">
            <button class="btn-reset-inline" data-reset="headingColor" data-i18n-title="resetToDefaultTitle" title="Reset to default">‚Ü∫</button>
          </div>
        </div>
        <div class="setting-item">
          <label for="linkColor" data-i18n="pdfLinkColor">PDF Link Color</label>
          <div class="color-row">
            <input type="color" id="linkColor" value="#6cacff">
            <input type="text" id="linkColorText" value="#6cacff" maxlength="7" class="color-hex-input">
            <button class="btn-reset-inline" data-reset="linkColor" data-i18n-title="resetToDefaultTitle" title="Reset to default">‚Ü∫</button>
          </div>
        </div>
        <div class="settings-divider"></div>
        <button id="resetStylesBtn" class="btn btn-reset" data-i18n="resetAllToDefault">Reset All to Default</button>
        <div class="settings-divider"></div>
        <div class="setting-item">
          <label data-i18n="importExportSettings">Import/Export Settings</label>
          <div class="import-export-buttons">
            <button id="exportSettingsBtn" class="btn btn-secondary btn-small" data-i18n="exportSettings">Export Settings</button>
            <button id="importSettingsBtn" class="btn btn-secondary btn-small" data-i18n="importSettings">Import Settings</button>
          </div>
          <p class="setting-hint" data-i18n="exportHint">Export includes: settings (without API keys), optional stats & cache</p>
          <input type="file" id="importFileInput" accept=".json" style="display: none;">
        </div>
        </div>
      </section>
    </main>

    <!-- Footer with version -->
    <footer class="popup-footer">
      <div class="popup-footer-divider"></div>
      <div class="popup-footer-links">
        <a href="https://github.com/YanGranat/ClipAIble" target="_blank" class="popup-footer-link" id="githubLink">GitHub</a>
        <span class="popup-footer-separator">‚Ä¢</span>
        <span class="popup-footer-version" id="versionText">v2.9.0</span>
      </div>
    </footer>

  </div>

  <!-- Import/Export Dialog Modal -->
  <div id="importExportModal" class="modal-overlay" style="display: none;">
    <div class="modal-dialog">
      <div class="modal-header">
        <h3 id="importExportModalTitle" data-i18n="exportSettings">Export Settings</h3>
        <button id="importExportModalClose" class="modal-close" aria-label="Close">√ó</button>
      </div>
      <div class="modal-body">
        <div id="importExportModalContent">
          <!-- Content will be populated by JS -->
        </div>
      </div>
      <div class="modal-footer">
        <button id="importExportModalCancel" class="btn btn-secondary" data-i18n="cancel">Cancel</button>
        <button id="importExportModalConfirm" class="btn btn-primary" data-i18n="confirm">Confirm</button>
      </div>
    </div>
  </div>

  <script src="popup.js" type="module"></script>
</body>
</html>

